<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Statistics Monitor | Vindral Examples</title>
    <!-- CSS Reset -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css"
    />

    <!-- Milligram CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css"
    />

    <!-- Example CSS -->
    <link
      rel="stylesheet"
      href="./index.css"
    />
  </head>
  <body>
    <main class="wrapper">
      <nav class="navigation">
        <section class="container">
          <a class="button" href="../">Back to examples</a>
        </section>
      </nav>
      <section class="container">
        <h1>Statistics Monitor Example</h1>
        <p>This example demonstrates how to use the <code>getStatistics()</code> function on the Vindral Live instance to monitor streaming quality metrics in real-time, similar to our quality of service client (<a target="_blank" href="https://qos.vindral.com/?core.channelId=vindral_demo1_ci_099ee1fa-80f3-455e-aa23-3d184e93e04f&core.channelGroupId=vindral_demo_pk_932730be-db0c-46a0-a592-cfce7bdc5a43">qos.vindral.com</a>).</p>

        <!-- Quality Overview Dashboard -->
        <div id="quality-dashboard" class="quality-dashboard">
          <div class="quality-indicator" id="connection-health">
            <div class="indicator-dot"></div>
            <span class="indicator-label">Connection</span>
            <span class="indicator-value">Good</span>
          </div>
          <div class="quality-indicator" id="playback-health">
            <div class="indicator-dot"></div>
            <span class="indicator-label">Playback</span>
            <span class="indicator-value">Stable</span>
          </div>
          <div class="quality-indicator" id="buffer-health">
            <div class="indicator-dot"></div>
            <span class="indicator-label">Buffer</span>
            <span class="indicator-value">Healthy</span>
          </div>
        </div>

        <!-- Main Layout: Player on left, Stats on right -->
        <div class="main-layout">
          <!-- Player Section -->
          <div class="player-section">
            <div id="playback-state">Initiating...</div>
            <div id="vindral-area">
              <div id="activate-audio-button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                </svg>
                <span>Click to Unmute</span>
              </div>
              <div id="vindral-container"></div>
            </div>

            <!-- Buffer Controls -->
            <div class="buffer-controls">
              <div class="buffer-controls-header">
                <span class="buffer-label">Target buffer time</span>
                <span id="current-buffer-time" class="buffer-value">1500 ms</span>
              </div>
              <div class="buffer-buttons">
                <button id="decrease-buffer" class="buffer-btn">âˆ’</button>
                <button id="increase-buffer" class="buffer-btn">+</button>
              </div>
            </div>

            <!-- Buffer Visualization -->
            <div class="buffer-graph-container">
              <canvas id="buffer-graph" width="800" height="150"></canvas>
            </div>

            <!-- Sync Statistics -->
            <div class="stats-card" style="margin-top: 20px;">
              <h3>Sync</h3>
              <div class="stats-content">
                <div class="stat-row">
                  <span class="stat-label">Seek Time:</span>
                  <span id="seek-time-value" class="stat-value">-</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label">Drift:</span>
                  <span id="drift-value" class="stat-value">-</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label">Drift Adjustments:</span>
                  <span id="drift-adjustments-value" class="stat-value">-</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label">Timeshift Drift Adjustments:</span>
                  <span id="timeshift-drift-adjustments-value" class="stat-value">-</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Statistics Section -->
          <div class="stats-section">
            <div class="stats-grid">

              <!-- Playback Statistics -->
              <div class="stats-card">
                <h3>Playback</h3>
                <div class="stats-content">
                  <div class="stat-row">
                    <span class="stat-label">Playback State:</span>
                    <span id="playback-state-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Last Buffer Event:</span>
                    <span id="last-buffer-event-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Buffer Fullness:</span>
                    <span id="buffer-fullness-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Time Spent Buffering:</span>
                    <span id="time-spent-buffering-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Time Spent Playing:</span>
                    <span id="time-spent-playing-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Rendition Level Changes:</span>
                    <span id="rendition-level-changes-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Time To First Frame:</span>
                    <span id="time-to-first-frame-value" class="stat-value">-</span>
                  </div>
                </div>
              </div>

              <!-- Rendition Metadata -->
              <div class="stats-card">
                <h3>Current Rendition</h3>
                <div class="stats-content">
                  <div class="stat-row">
                    <span class="stat-label">Video Bitrate:</span>
                    <span id="video-bitrate-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Audio Bitrate:</span>
                    <span id="audio-bitrate-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Video Resolution:</span>
                    <span id="video-resolution-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Video Codec:</span>
                    <span id="video-codec-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Audio Codec:</span>
                    <span id="audio-codec-value" class="stat-value">-</span>
                  </div>
                </div>
              </div>

              <!-- Connection Statistics -->
              <div class="stats-card">
                <h3>Connection</h3>
                <div class="stats-content">
                  <div class="stat-row">
                    <span class="stat-label">Edge URL:</span>
                    <span id="edge-url-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Protocol:</span>
                    <span id="protocol-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Connection State:</span>
                    <span id="connection-state-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">RTT:</span>
                    <span id="rtt-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Estimated Bandwidth:</span>
                    <span id="estimated-bandwidth-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Bit Rate:</span>
                    <span id="total-bitrate-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Connection Count:</span>
                    <span id="connection-count-value" class="stat-value">-</span>
                  </div>
                </div>
              </div>

              <!-- Time Statistics -->
              <div class="stats-card">
                <h3>Time</h3>
                <div class="stats-content">
                  <div class="stat-row">
                    <span class="stat-label">Server Edge Time:</span>
                    <span id="server-edge-time-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Channel Current Time:</span>
                    <span id="channel-current-time-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Playback Wallclock Time:</span>
                    <span id="playback-wallclock-time-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Server Wallclock Time:</span>
                    <span id="server-wallclock-time-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Playback Latency:</span>
                    <span id="playback-latency-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Uptime:</span>
                    <span id="uptime-value" class="stat-value">-</span>
                  </div>
                </div>
              </div>

              <!-- Session Statistics -->
              <div class="stats-card">
                <h3>Session</h3>
                <div class="stats-content">
                  <div class="stat-row">
                    <span class="stat-label">SDK Version:</span>
                    <span id="sdk-version-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Client ID:</span>
                    <span id="client-id-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Session ID:</span>
                    <span id="session-id-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Channel ID:</span>
                    <span id="channel-id-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Channel Group ID:</span>
                    <span id="channel-group-id-value" class="stat-value">-</span>
                  </div>
                </div>
              </div>

              <!-- Navigator Estimations -->
              <div class="stats-card">
                <h3>Navigator Estimations</h3>
                <div class="stats-content">
                  <div class="stat-row">
                    <span class="stat-label">RTT:</span>
                    <span id="navigator-rtt-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Downlink:</span>
                    <span id="navigator-downlink-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Connection Type:</span>
                    <span id="navigator-connection-type-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Effective Type:</span>
                    <span id="navigator-effective-type-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Data Saving:</span>
                    <span id="navigator-save-data-value" class="stat-value">-</span>
                  </div>
                </div>
              </div>

              <!-- Decode Performance -->
              <div class="stats-card">
                <h3>Decode Performance</h3>
                <div class="stats-content">
                  <div class="stat-row">
                    <span class="stat-label">Rendered Video Frames:</span>
                    <span id="rendered-video-frames-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Dropped Video Frames:</span>
                    <span id="dropped-video-frames-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Video Decode Rate:</span>
                    <span id="video-decode-rate-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Video Decode Time:</span>
                    <span id="video-decode-time-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Video Transport Time:</span>
                    <span id="video-transport-time-value" class="stat-value">-</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Audio Decode Time:</span>
                    <span id="audio-decode-time-value" class="stat-value">-</span>
                  </div>
                </div>
              </div>
        </div>
      </div>
      </section>

      <section class="container" style="margin-top: 50px;">
        <ul>
          <li><a target="_blank" href="https://github.com/RealSprint/vindral-examples/tree/main/statistics-monitor">Example source code</a></li>
          <li><a target="_blank" href="https://docs.vindral.com/playout/websdk/">Web SDK Documentation</a></li>
          <li><a target="_blank" href="https://qos.vindral.com">Quality of Service Client</a></li>
        </ul>
      </section>
    </main>
  </body>
</html>
